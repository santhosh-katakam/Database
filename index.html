<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Student Dashboard</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <main class="main-content">
      <!-- Home Page -->
      <div id="home-page">
        <div class="header">
          <h1 id="page-title">Regional Center Khammam</h1>
          <p id="page-description">View and manage students across all courses</p>
        </div>

        <div class="course-filters">
          <button class="filter-btn active" onclick="showAllStudents()">
            All Students <span class="count" id="all-count">0</span>
          </button>
          <button class="filter-btn" onclick="showCourseMonths()">
            Course Months <span class="count" id="course-count">0</span>
          </button>
          <button class="filter-btn" onclick="showCourseStudents('Frontend')">
            Frontend <span class="count" id="frontend-count">0</span>
          </button>
          <button class="filter-btn" onclick="showCourseStudents('Machine Learning')">
            Machine Learning <span class="count" id="machine-learning-count">0</span>
          </button>
          <button class="filter-btn" onclick="showCourseStudents('Data Science')">
            Data Science <span class="count" id="data-science-count">0</span>
          </button>
          <button class="filter-btn" onclick="showCourseStudents('Artificial Intelligence')">
            AI <span class="count" id="artificial-intelligence-count">0</span>
          </button>
          <button class="filter-btn" onclick="showCourseStudents('Backend')">
            Backend <span class="count" id="backend-count">0</span>
          </button>
          <button class="filter-btn" onclick="showCourseStudents('Mobile Development')">
            Mobile Dev <span class="count" id="mobile-development-count">0</span>
          </button>
          <button class="add-student-btn" onclick="showAddStudentForm()">
            + Add New Student
          </button>
        </div>

        <div class="top-bar">
          <input type="text" id="search" placeholder="Search students..." onkeyup="handleSearch()">
          <button onclick="searchStudents()">Search</button>
          <span>Total: <strong id="total-count">0</strong></span>
        </div>

        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th>Name</th>
                <th>Username</th>
                <th>Hall Ticket</th>
                <th>Email</th>
                <th>Course</th>
                <th>End Date</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="student-table">
              <!-- JS will load rows -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Course Months Page -->
      <div id="course-months-page" style="display: none;">
        <div class="header">
          <button class="back-btn" onclick="goBackToHome()">← Back to Home</button>
          <h1 id="course-title">Course Monthly View</h1>
          <p id="course-description">Select a month to view students joining in that month</p>
        </div>

        <div class="months-grid" id="months-container">
          <!-- Months will be loaded by JavaScript -->
        </div>
      </div>

      <!-- Course Students Page -->
      <div id="course-students" class="page" style="display: none;">
        <div class="header">
          <button class="back-btn" onclick="showAllStudents()">← Back to All Students</button>
          <h1 id="course-students-title">Frontend Development Students</h1>
          <p id="course-students-description">Students enrolled in this course</p>
        </div>

        <div class="course-stats">
          <div class="stat-card">
            <h3 id="course-student-count">0</h3>
            <p>Students Enrolled</p>
          </div>
        </div>

        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th>Name</th>
                <th>Username</th>
                <th>Hall Ticket</th>
                <th>Email</th>
                <th>Join Date</th>
                <th>End Date</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="course-student-table">
              <!-- JS will load rows -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Monthly Students Page -->
      <div id="monthly-students-page" style="display: none;">
        <div class="header">
          <button class="back-btn" onclick="showCourseMonths()">← Back to Months</button>
          <h1 id="month-title">Students Joining in January</h1>
          <p id="month-description">Frontend course students</p>
        </div>

        <div class="monthly-stats">
          <div class="stat-card">
            <h3 id="month-student-count">0</h3>
            <p>Students Joining</p>
          </div>
        </div>

        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th>Name</th>
                <th>Username</th>
                <th>Hall Ticket</th>
                <th>Email</th>
                <th>End Date</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="monthly-student-table">
              <!-- JS will load rows -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Edit Student Page -->
      <div id="edit-student-page" style="display: none;">
        <div class="header">
          <button class="back-btn" onclick="goBackFromEdit()">← Back</button>
          <h1>Edit Student</h1>
          <p>Edit student details and course enrollments</p>
        </div>

        <form id="edit-student-form" onsubmit="updateStudent(event)">
          <div class="form-grid">
            <div class="form-group">
              <label for="edit-student-name">Full Name *</label>
              <input type="text" id="edit-student-name" name="name" required>
            </div>

            <div class="form-group">
              <label for="edit-student-username">Username *</label>
              <input type="text" id="edit-student-username" name="username" required>
            </div>

            <div class="form-group">
              <label for="edit-student-hallticket">Hall Ticket Number *</label>
              <input type="text" id="edit-student-hallticket" name="hallticket" required readonly>
            </div>

            <div class="form-group">
              <label for="edit-student-email">Email Address *</label>
              <input type="email" id="edit-student-email" name="email" required>
            </div>

            <div class="form-group">
              <label for="edit-student-caste">Caste</label>
              <select id="edit-student-caste" name="caste">
                <option value="">Select Caste</option>
                <option value="GENERAL">GENERAL</option>
                <option value="OBC">OBC</option>
                <option value="SC">SC</option>
                <option value="ST">ST</option>
              </select>
            </div>

            <div class="form-group">
              <label for="edit-student-branch">Branch</label>
              <input type="text" id="edit-student-branch" name="branch" placeholder="e.g., BSC, BTech">
            </div>

            <div class="form-group">
              <label for="edit-student-courses">Courses *</label>
              <div class="courses-selection">
                <div class="course-checkbox">
                  <input type="checkbox" id="edit-course-frontend" name="courses" value="Frontend">
                  <label for="edit-course-frontend">Frontend Development</label>
                </div>
                <div class="course-checkbox">
                  <input type="checkbox" id="edit-course-backend" name="courses" value="Backend">
                  <label for="edit-course-backend">Backend Development</label>
                </div>
                <div class="course-checkbox">
                  <input type="checkbox" id="edit-course-ml" name="courses" value="Machine Learning">
                  <label for="edit-course-ml">Machine Learning</label>
                </div>
                <div class="course-checkbox">
                  <input type="checkbox" id="edit-course-ai" name="courses" value="Artificial Intelligence">
                  <label for="edit-course-ai">Artificial Intelligence</label>
                </div>
                <div class="course-checkbox">
                  <input type="checkbox" id="edit-course-ds" name="courses" value="Data Science">
                  <label for="edit-course-ds">Data Science</label>
                </div>
                <div class="course-checkbox">
                  <input type="checkbox" id="edit-course-mobile" name="courses" value="Mobile Development">
                  <label for="edit-course-mobile">Mobile Development</label>
                </div>

              </div>
            </div>

            <div class="form-group">
              <label for="edit-student-image">Profile Image</label>
              <input type="file" id="edit-student-image" name="image" accept="image/*" onchange="previewEditImage(this)">
              <div class="image-preview" id="edit-image-preview" style="display: none;">
                <img id="edit-preview-img" src="" alt="Preview" style="width: 100px; height: 100px; object-fit: cover; border-radius: 8px; margin-top: 10px;">
              </div>
            </div>
          </div>

          <div class="form-actions">
            <button type="button" class="cancel-btn" onclick="goBackFromEdit()">Cancel</button>
            <button type="submit" class="submit-btn">Update Student</button>
          </div>
        </form>
      </div>

      <!-- Add Student Page -->
      <div id="add-student-page" style="display: none;">
        <div class="header">
          <button class="back-btn" onclick="goBackToHome()">← Back to Home</button>
          <h1>Add New Student</h1>
          <p>Add a new student to any available course</p>
        </div>

        <div class="form-container">
          <form id="add-student-form" onsubmit="addNewStudent(event)">
            <div class="form-grid">
              <div class="form-group">
                <label for="student-name">Full Name *</label>
                <input type="text" id="student-name" name="name" required placeholder="Enter student's full name">
              </div>

              <div class="form-group">
                <label for="student-username">Username *</label>
                <input type="text" id="student-username" name="username" required placeholder="e.g., t25rcbs00143">
              </div>

              <div class="form-group">
                <label for="student-hallticket">Hall Ticket Number *</label>
                <input type="text" id="student-hallticket" name="hallticket" required placeholder="Enter hall ticket number">
              </div>

              <div class="form-group">
                <label for="student-email">Email Address *</label>
                <input type="email" id="student-email" name="email" required placeholder="student@example.com">
              </div>

              <div class="form-group">
                <label for="student-caste">Caste</label>
                <select id="student-caste" name="caste">
                  <option value="GENERAL">GENERAL</option>
                  <option value="OBC">OBC</option>
                  <option value="SC">SC</option>
                  <option value="ST">ST</option>
                </select>
              </div>

              <div class="form-group">
                <label for="student-branch">Branch</label>
                <input type="text" id="student-branch" name="branch" value="BSC" placeholder="Enter branch">
              </div>

              <div class="form-group">
                <label for="student-join-month">Join Month *</label>
                <select id="student-join-month" name="joinMonth" required>
                  <option value="">Select Month</option>
                  <option value="January">January</option>
                  <option value="February">February</option>
                  <option value="March">March</option>
                  <option value="April">April</option>
                  <option value="May">May</option>
                  <option value="June">June</option>
                  <option value="July">July</option>
                  <option value="August">August</option>
                  <option value="September">September</option>
                  <option value="October">October</option>
                  <option value="November">November</option>
                  <option value="December">December</option>
                </select>
              </div>

              <div class="form-group">
                <label for="student-course">Course *</label>
                <select id="student-course" name="course" required>
                  <option value="">Select Course</option>
                  <option value="Frontend">Frontend Development</option>
                  <option value="Backend">Backend Development</option>
                  <option value="Machine Learning">Machine Learning</option>
                  <option value="Artificial Intelligence">Artificial Intelligence</option>
                  <option value="Data Science">Data Science</option>
                  <option value="Mobile Development">Mobile Development</option>

                </select>
              </div>

              <div class="form-group">
                <label for="student-join-date">Join Date *</label>
                <input type="date" id="student-join-date" name="joinDate" required>
                <small>End date will be automatically calculated (6 months from join date)</small>
              </div>

              <div class="form-group">
                <label for="student-image">Profile Image</label>
                <input type="file" id="student-image" name="image" accept="image/*" onchange="previewImage(this)">
                <div class="image-preview" id="image-preview" style="display: none;">
                  <img id="preview-img" src="" alt="Preview" style="width: 100px; height: 100px; object-fit: cover; border-radius: 8px; margin-top: 10px;">
                </div>
              </div>
            </div>

            <div class="form-actions">
              <button type="button" class="cancel-btn" onclick="goBackToHome()">Cancel</button>
              <button type="submit" class="submit-btn">Add Student</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Student ID Card Modal -->
      <div id="student-modal" class="modal" style="display: none;">
        <div class="modal-content id-card-modal">
          <span class="close" onclick="closeModal()">&times;</span>
          <div id="student-id-card"></div>
        </div>
      </div>

      <!-- Delete Confirmation Modal -->
      <div id="delete-modal" class="modal" style="display: none;">
        <div class="modal-content delete-modal">
          <div class="delete-modal-header">
            <h3>⚠️ Confirm Delete</h3>
          </div>
          <div class="delete-modal-body">
            <p>Are you sure you want to delete this student?</p>
            <p><strong id="delete-student-name"></strong></p>
            <p class="warning-text">This action cannot be undone.</p>
          </div>
          <div class="delete-modal-actions">
            <button class="cancel-btn" onclick="closeDeleteModal()">Cancel</button>
            <button class="delete-confirm-btn" onclick="confirmDelete()">🗑️ Delete</button>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script src="script.js"></script>
</body>
</html>
